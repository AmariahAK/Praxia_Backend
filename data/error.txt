 1
db-1                 | 2025-05-16 18:42:30.769 UTC [54] FATAL:  database "amariah" does not exist
redis-exporter-1     | time="2025-05-16T18:42:30Z" level=info msg="checkKeys metric collection for role: master  flag: false"
celery-1             | Operations to perform:
celery-1             |   Apply all migrations: admin, api, auth, authtoken, contenttypes, otp_totp, sessions
celery-1             | Running migrations:
celery-beat-1        | Operations to perform:
celery-beat-1        |   Apply all migrations: admin, api, auth, authtoken, contenttypes, otp_totp, sessions
celery-beat-1        | Running migrations:
db-1                 | 2025-05-16 18:42:31.409 UTC [56] ERROR:  duplicate key value violates unique constraint "pg_class_relname_nsp_index"
db-1                 | 2025-05-16 18:42:31.409 UTC [56] DETAIL:  Key (relname, relnamespace)=(django_migrations_id_seq, 2200) already exists.
db-1                 | 2025-05-16 18:42:31.409 UTC [56] STATEMENT:  CREATE TABLE "django_migrations" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "app" varchar(255) NOT NULL, "name" varchar(255) NOT NULL, "applied" timestamp with time zone NOT NULL)
celery-beat-1        | Traceback (most recent call last):
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 103, in _execute
celery-beat-1        |     return self.cursor.execute(sql)
celery-beat-1        |            ~~~~~~~~~~~~~~~~~~~^^^^^
celery-beat-1        | psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "pg_class_relname_nsp_index"
celery-beat-1        | DETAIL:  Key (relname, relnamespace)=(django_migrations_id_seq, 2200) already exists.
celery-beat-1        | 
celery-beat-1        | 
celery-1             |   Applying contenttypes.0001_initial... OK
celery-beat-1        | The above exception was the direct cause of the following exception:
celery-beat-1        | 
celery-beat-1        | Traceback (most recent call last):
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/db/migrations/recorder.py", line 78, in ensure_schema
celery-beat-1        |     editor.create_model(self.Migration)
celery-beat-1        |     ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/base/schema.py", line 512, in create_model
celery-beat-1        |     self.execute(sql, params or None)
celery-beat-1        |     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/postgresql/schema.py", line 45, in execute
celery-beat-1        |     return super().execute(sql, params)
celery-beat-1        |            ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/base/schema.py", line 204, in execute
celery-beat-1        |     cursor.execute(sql, params)
celery-beat-1        |     ~~~~~~~~~~~~~~^^^^^^^^^^^^^
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 122, in execute
celery-beat-1        |     return super().execute(sql, params)
celery-beat-1        |            ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
celery-beat-1        |     return self._execute_with_wrappers(
celery-beat-1        |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
celery-beat-1        |         sql, params, many=False, executor=self._execute
celery-beat-1        |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
celery-beat-1        |     )
celery-beat-1        |     ^
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
celery-beat-1        |     return executor(sql, params, many, context)
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
celery-beat-1        |     with self.db.wrap_database_errors:
celery-beat-1        |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
celery-beat-1        |     raise dj_exc_value.with_traceback(traceback) from exc_value
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 103, in _execute
celery-beat-1        |     return self.cursor.execute(sql)
celery-beat-1        |            ~~~~~~~~~~~~~~~~~~~^^^^^
celery-beat-1        | django.db.utils.IntegrityError: duplicate key value violates unique constraint "pg_class_relname_nsp_index"
celery-beat-1        | DETAIL:  Key (relname, relnamespace)=(django_migrations_id_seq, 2200) already exists.
celery-beat-1        | 
celery-beat-1        | 
celery-beat-1        | During handling of the above exception, another exception occurred:
celery-beat-1        | 
celery-beat-1        | Traceback (most recent call last):
celery-beat-1        |   File "/app/manage.py", line 22, in <module>
celery-beat-1        |     main()
celery-beat-1        |     ~~~~^^
celery-beat-1        |   File "/app/manage.py", line 18, in main
celery-beat-1        |     execute_from_command_line(sys.argv)
celery-beat-1        |     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
celery-beat-1        |     utility.execute()
celery-beat-1        |     ~~~~~~~~~~~~~~~^^
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/core/management/__init__.py", line 436, in execute
celery-beat-1        |     self.fetch_command(subcommand).run_from_argv(self.argv)
celery-beat-1        |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/core/management/base.py", line 416, in run_from_argv
celery-beat-1        |     self.execute(*args, **cmd_options)
celery-beat-1        |     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/core/management/base.py", line 460, in execute
celery-beat-1        |     output = self.handle(*args, **options)
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/core/management/base.py", line 107, in wrapper
celery-beat-1        |     res = handle_func(*args, **kwargs)
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/core/management/commands/migrate.py", line 353, in handle
celery-beat-1        |     post_migrate_state = executor.migrate(
celery-beat-1        |         targets,
celery-beat-1        |     ...<3 lines>...
celery-beat-1        |         fake_initial=fake_initial,
celery-beat-1        |     )
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/db/migrations/executor.py", line 107, in migrate
celery-beat-1        |     self.recorder.ensure_schema()
celery-beat-1        |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
celery-beat-1        |   File "/usr/local/lib/python3.13/site-packages/django/db/migrations/recorder.py", line 80, in ensure_schema
celery-beat-1        |     raise MigrationSchemaMissing(
celery-beat-1        |         "Unable to create the django_migrations table (%s)" % exc
celery-beat-1        |     )
celery-beat-1        | django.db.migrations.exceptions.MigrationSchemaMissing: Unable to create the django_migrations table (duplicate key value violates unique constraint "pg_class_relname_nsp_index"
celery-beat-1        | DETAIL:  Key (relname, relnamespace)=(django_migrations_id_seq, 2200) already exists.
celery-beat-1        | )
celery-1             |   Applying auth.0001_initial... OK
celery-1             |   Applying admin.0001_initial... OK
celery-1             |   Applying admin.0002_logentry_remove_auto_add... OK
celery-1             |   Applying admin.0003_logentry_add_action_flag_choices... OK
celery-1             |   Applying api.0001_initial... OK
celery-1             |   Applying contenttypes.0002_remove_content_type_name... OK
celery-1             |   Applying auth.0002_alter_permission_name_max_length... OK
celery-1             |   Applying auth.0003_alter_user_email_max_length... OK
celery-1             |   Applying auth.0004_alter_user_username_opts... OK
celery-1             |   Applying auth.0005_alter_user_last_login_null... OK
celery-1             |   Applying auth.0006_require_contenttypes_0002... OK
celery-1             |   Applying auth.0007_alter_validators_add_error_messages... OK
celery-1             |   Applying auth.0008_alter_user_username_max_length... OK
celery-1             |   Applying auth.0009_alter_user_last_name_max_length... OK
celery-1             |   Applying auth.0010_alter_group_name_max_length... OK
celery-1             |   Applying auth.0011_update_proxy_permissions... OK
celery-1             |   Applying auth.0012_alter_user_first_name_max_length... OK
celery-1             |   Applying authtoken.0001_initial... OK
celery-1             |   Applying authtoken.0002_auto_20160226_1747... OK
celery-1             |   Applying authtoken.0003_tokenproxy... OK
celery-1             |   Applying authtoken.0004_alter_tokenproxy_options... OK
celery-1             |   Applying otp_totp.0001_initial... OK
celery-1             |   Applying otp_totp.0002_auto_20190420_0723... OK
celery-1             |   Applying otp_totp.0003_add_timestamps... OK
celery-1             |   Applying sessions.0001_initial... OK
celery-beat-1        | Creating superuser if needed...
web-1                | Operations to perform:
web-1                |   Apply all migrations: admin, api, auth, authtoken, contenttypes, otp_totp, sessions
web-1                | Running migrations:
web-1                |   No migrations to apply.
web-1                |   Your models in app(s): 'api' have changes that are not yet reflected in a migration, and so won't be applied.
web-1                |   Run 'manage.py makemigrations' to make new migrations, and then re-run 'manage.py migrate' to apply them.
celery-1             | Creating superuser if needed...
postgres-exporter-1  | time="2025-05-16T18:42:34Z" level=info msg="Established new database connection to \"db:5432\"." source="postgres_exporter.go:970"
postgres-exporter-1  | time="2025-05-16T18:42:34Z" level=info msg="Semantic Version Changed on \"db:5432\": 0.0.0 -> 14.18.0" source="postgres_exporter.go:1539"
web-1                | Creating superuser if needed...