celery-1       | Creating superuser if needed...
sam-1 exited with code 0
celery-beat-1        | Creating superuser if needed...
redis-exporter-1     | time="2025-05-16T19:33:17Z" level=info msg="checkKeys metric collection for role: master  flag: false"
db-1                 | 2025-05-16 19:33:18.136 UTC [156] ERROR:  duplicate key value violates unique constraint "api_userprofile_user_id_key"
db-1                 | 2025-05-16 19:33:18.136 UTC [156] DETAIL:  Key (user_id)=(1) already exists.
db-1                 | 2025-05-16 19:33:18.136 UTC [156] STATEMENT:  INSERT INTO "api_userprofile" ("user_id", "profile_picture", "age", "gender", "gender_locked", "weight", "height", "country", "allergies", "preferred_language", "created_at", "updated_at") VALUES (1, '', NULL, NULL, false, NULL, NULL, '', '', 'en', '2025-05-16T19:33:18.136623+00:00'::timestamptz, '2025-05-16T19:33:18.136629+00:00'::timestamptz) RETURNING "api_userprofile"."id"
db-1                 | 2025-05-16 19:33:18.142 UTC [155] ERROR:  duplicate key value violates unique constraint "auth_user_username_key"
db-1                 | 2025-05-16 19:33:18.142 UTC [155] DETAIL:  Key (username)=(admin) already exists.
db-1                 | 2025-05-16 19:33:18.142 UTC [155] STATEMENT:  INSERT INTO "auth_user" ("password", "last_login", "is_superuser", "username", "first_name", "last_name", "email", "is_staff", "is_active", "date_joined") VALUES ('pbkdf2_sha256$1000000$tvWNADGJvjI5cPbmJUYjyW$WImHHaoFVPfVVEDTH2ytTyNqHJllzWnPxeY4n5iNYW0=', NULL, true, 'admin', '', '', 'admin@example.com', true, true, '2025-05-16T19:33:17.843495+00:00'::timestamptz) RETURNING "auth_user"."id"
web-1                | Traceback (most recent call last):
celery-1             | Traceback (most recent call last):
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
celery-1             |     return self.cursor.execute(sql, params)
web-1                |     return self.cursor.execute(sql, params)
celery-1             |            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
web-1                |            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
celery-1             | psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "auth_user_username_key"
web-1                | psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "api_userprofile_user_id_key"
celery-1             | DETAIL:  Key (username)=(admin) already exists.
web-1                | DETAIL:  Key (user_id)=(1) already exists.
celery-1             | 
web-1                | 
celery-1             | 
web-1                | 
celery-1             | The above exception was the direct cause of the following exception:
web-1                | The above exception was the direct cause of the following exception:
celery-1             | 
web-1                | 
celery-1             | Traceback (most recent call last):
web-1                | Traceback (most recent call last):
celery-1             |   File "/app/manage.py", line 22, in <module>
celery-1             |     main()
celery-1             |     ~~~~^^
celery-1             |   File "/app/manage.py", line 18, in main
celery-1             |     execute_from_command_line(sys.argv)
celery-1             |     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
celery-1             |     utility.execute()
celery-1             |     ~~~~~~~~~~~~~~~^^
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/core/management/__init__.py", line 436, in execute
celery-1             |     self.fetch_command(subcommand).run_from_argv(self.argv)
celery-1             |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/core/management/base.py", line 416, in run_from_argv
celery-1             |     self.execute(*args, **cmd_options)
celery-1             |     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 90, in execute
celery-1             |     return super().execute(*args, **options)
web-1                |   File "/app/manage.py", line 22, in <module>
celery-1             |            ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
web-1                |     main()
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/core/management/base.py", line 460, in execute
web-1                |     ~~~~^^
celery-1             |     output = self.handle(*args, **options)
web-1                |   File "/app/manage.py", line 18, in main
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 239, in handle
web-1                |     execute_from_command_line(sys.argv)
celery-1             |     self.UserModel._default_manager.db_manager(database).create_superuser(
web-1                |     ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
celery-1             |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
celery-1             |         **user_data
web-1                |     utility.execute()
celery-1             |         ^^^^^^^^^^^
web-1                |     ~~~~~~~~~~~~~~~^^
celery-1             |     )
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/core/management/__init__.py", line 436, in execute
celery-1             |     ^
web-1                |     self.fetch_command(subcommand).run_from_argv(self.argv)
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/contrib/auth/models.py", line 195, in create_superuser
web-1                |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
celery-1             |     return self._create_user(username, email, password, **extra_fields)
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/core/management/base.py", line 416, in run_from_argv
celery-1             |            ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1                |     self.execute(*args, **cmd_options)
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/contrib/auth/models.py", line 163, in _create_user
web-1                |     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
celery-1             |     user.save(using=self._db)
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 90, in execute
celery-1             |     ~~~~~~~~~^^^^^^^^^^^^^^^^
web-1                |     return super().execute(*args, **options)
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/contrib/auth/base_user.py", line 65, in save
web-1                |            ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
celery-1             |     super().save(*args, **kwargs)
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/core/management/base.py", line 460, in execute
celery-1             |     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
web-1                |     output = self.handle(*args, **options)
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 239, in handle
celery-1             |     self.save_base(
web-1                |     self.UserModel._default_manager.db_manager(database).create_superuser(
celery-1             |     ~~~~~~~~~~~~~~^
web-1                |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
celery-1             |         using=using,
web-1                |         **user_data
celery-1             |         ^^^^^^^^^^^^
web-1                |         ^^^^^^^^^^^
celery-1             |     ...<2 lines>...
web-1                |     )
celery-1             |         update_fields=update_fields,
web-1                |     ^
celery-1             |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/contrib/auth/models.py", line 195, in create_superuser
celery-1             |     )
web-1                |     return self._create_user(username, email, password, **extra_fields)
celery-1             |     ^
web-1                |            ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/models/base.py", line 1008, in save_base
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/contrib/auth/models.py", line 163, in _create_user
celery-1             |     updated = self._save_table(
web-1                |     user.save(using=self._db)
celery-1             |         raw,
web-1                |     ~~~~~~~~~^^^^^^^^^^^^^^^^
celery-1             |     ...<4 lines>...
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/contrib/auth/base_user.py", line 65, in save
celery-1             |         update_fields,
web-1                |     super().save(*args, **kwargs)
celery-1             |     )
web-1                |     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/models/base.py", line 1169, in _save_table
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
celery-1             |     results = self._do_insert(
web-1                |     self.save_base(
celery-1             |         cls._base_manager, using, fields, returning_fields, raw
web-1                |     ~~~~~~~~~~~~~~^
celery-1             |     )
web-1                |         using=using,
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/models/base.py", line 1210, in _do_insert
web-1                |         ^^^^^^^^^^^^
celery-1             |     return manager._insert(
web-1                |     ...<2 lines>...
celery-1             |            ~~~~~~~~~~~~~~~^
web-1                |         update_fields=update_fields,
celery-1             |         [self],
web-1                |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
celery-1             |         ^^^^^^^
web-1                |     )
celery-1             |     ...<3 lines>...
web-1                |     ^
celery-1             |         raw=raw,
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/models/base.py", line 1023, in save_base
web-1                |     post_save.send(
web-1                |     ~~~~~~~~~~~~~~^
celery-1             |         ^^^^^^^^
web-1                |         sender=origin,
celery-1             |     )
web-1                |         ^^^^^^^^^^^^^^
celery-1             |     ^
web-1                |     ...<4 lines>...
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
web-1                |         using=using,
celery-1             |     return getattr(self.get_queryset(), name)(*args, **kwargs)
web-1                |         ^^^^^^^^^^^^
celery-1             |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
web-1                |     )
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/models/query.py", line 1864, in _insert
web-1                |     ^
celery-1             |     return query.get_compiler(using=using).execute_sql(returning_fields)
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/dispatch/dispatcher.py", line 189, in send
celery-1             |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
web-1                |     response = receiver(signal=self, sender=sender, **named)
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
web-1                |   File "/app/api/signals.py", line 16, in create_user_profile
celery-1             |     cursor.execute(sql, params)
web-1                |     UserProfile.objects.create(user=instance)
celery-1             |     ~~~~~~~~~~~~~~^^^^^^^^^^^^^
web-1                |     ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 122, in execute
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
celery-1             |     return super().execute(sql, params)
web-1                |     return getattr(self.get_queryset(), name)(*args, **kwargs)
celery-1             |            ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
web-1                |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/models/query.py", line 663, in create
celery-1             |     return self._execute_with_wrappers(
celery-1             |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
celery-1             |         sql, params, many=False, executor=self._execute
web-1                |     obj.save(force_insert=True, using=self.db)
celery-1             |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1                |     ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
celery-1             |     )
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/models/base.py", line 902, in save
celery-1             |     ^
web-1                |     self.save_base(
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
web-1                |     ~~~~~~~~~~~~~~^
celery-1             |     return executor(sql, params, many, context)
web-1                |         using=using,
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
web-1                |         ^^^^^^^^^^^^
celery-1             |     with self.db.wrap_database_errors:
web-1                |     ...<2 lines>...
celery-1             |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1                |         update_fields=update_fields,
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
web-1                |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
celery-1             |     raise dj_exc_value.with_traceback(traceback) from exc_value
web-1                |     )
celery-1             |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
web-1                |     ^
celery-1             |     return self.cursor.execute(sql, params)
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/models/base.py", line 1008, in save_base
celery-1             |            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
web-1                |     updated = self._save_table(
celery-1             | django.db.utils.IntegrityError: duplicate key value violates unique constraint "auth_user_username_key"
web-1                |         raw,
celery-1             | DETAIL:  Key (username)=(admin) already exists.
web-1                |     ...<4 lines>...
celery-1             | 
web-1                |         update_fields,
web-1                |     )
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/models/base.py", line 1169, in _save_table
web-1                |     results = self._do_insert(
web-1                |         cls._base_manager, using, fields, returning_fields, raw
web-1                |     )
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/models/base.py", line 1210, in _do_insert
web-1                |     return manager._insert(
web-1                |            ~~~~~~~~~~~~~~~^
web-1                |         [self],
web-1                |         ^^^^^^^
web-1                |     ...<3 lines>...
web-1                |         raw=raw,
web-1                |         ^^^^^^^^
web-1                |     )
web-1                |     ^
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/models/manager.py", line 87, in manager_method
web-1                |     return getattr(self.get_queryset(), name)(*args, **kwargs)
web-1                |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/models/query.py", line 1864, in _insert
web-1                |     return query.get_compiler(using=using).execute_sql(returning_fields)
web-1                |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
web-1                |     cursor.execute(sql, params)
web-1                |     ~~~~~~~~~~~~~~^^^^^^^^^^^^^
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 122, in execute
web-1                |     return super().execute(sql, params)
web-1                |            ~~~~~~~~~~~~~~~^^^^^^^^^^^^^
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 79, in execute
web-1                |     return self._execute_with_wrappers(
web-1                |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
web-1                |         sql, params, many=False, executor=self._execute
web-1                |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1                |     )
web-1                |     ^
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
web-1                |     return executor(sql, params, many, context)
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 100, in _execute
web-1                |     with self.db.wrap_database_errors:
web-1                |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/utils.py", line 91, in __exit__
web-1                |     raise dj_exc_value.with_traceback(traceback) from exc_value
web-1                |   File "/usr/local/lib/python3.13/site-packages/django/db/backends/utils.py", line 105, in _execute
web-1                |     return self.cursor.execute(sql, params)
web-1                |            ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
web-1                | django.db.utils.IntegrityError: duplicate key value violates unique constraint "api_userprofile_user_id_key"
web-1                | DETAIL:  Key (user_id)=(1) already exists.